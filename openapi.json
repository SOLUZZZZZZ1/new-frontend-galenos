{"openapi":"3.1.0","info":{"title":"MEDIAZION Backend","version":"3.2.1"},"paths":{"/health":{"get":{"summary":"Health","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/admin/health":{"get":{"summary":"Health","operationId":"health_admin_health_get","parameters":[{"name":"x-admin-token","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Admin-Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/approve/{mediador_id}":{"post":{"summary":"Approve Mediador","operationId":"approve_mediador_admin_approve__mediador_id__post","parameters":[{"name":"mediador_id","in":"path","required":true,"schema":{"type":"string","title":"Mediador Id"}},{"name":"x-admin-token","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Admin-Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/disable/{mediador_id}":{"post":{"summary":"Disable Mediador","operationId":"disable_mediador_admin_disable__mediador_id__post","parameters":[{"name":"mediador_id","in":"path","required":true,"schema":{"type":"string","title":"Mediador Id"}},{"name":"x-admin-token","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Admin-Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/contact":{"post":{"summary":"Contact","operationId":"contact_contact_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContactIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mediadores/register":{"post":{"tags":["mediadores"],"summary":"Register","operationId":"register_mediadores_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MediadorIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mediadores/status":{"get":{"tags":["mediadores"],"summary":"Status","description":"Devuelve estado de suscripción por email para pintar el CTA del panel.","operationId":"status_mediadores_status_get","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string","title":"Email"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/login":{"post":{"tags":["auth"],"summary":"Login","operationId":"login_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/change-password":{"post":{"tags":["auth"],"summary":"Change Password","operationId":"change_password_auth_change_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/news":{"get":{"summary":"News","operationId":"news_news_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}},{"name":"source","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/upload/file":{"post":{"summary":"Upload File","operationId":"upload_file_upload_file_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_file_upload_file_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/mediadores/count":{"get":{"tags":["admin-mediadores"],"summary":"Count All","operationId":"count_all_admin_mediadores_count_get","parameters":[{"name":"x-admin-token","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Admin-Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/mediadores/purge_all":{"post":{"tags":["admin-mediadores"],"summary":"Purge All","description":"Borra TODO el contenido de la tabla mediadores y reinicia el contador de IDs.\n¡PELIGRO! Úsalo solo en entornos de prueba o si estás seguro.","operationId":"purge_all_admin_mediadores_purge_all_post","parameters":[{"name":"x-admin-token","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Admin-Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/mediadores/purge_by_domain":{"post":{"tags":["admin-mediadores"],"summary":"Purge By Domain","description":"Elimina todos los mediadores cuyo email termine en un dominio concreto.\nEjemplo: /admin/mediadores/purge_by_domain?domain=@mailinator.com","operationId":"purge_by_domain_admin_mediadores_purge_by_domain_post","parameters":[{"name":"domain","in":"query","required":true,"schema":{"type":"string","description":"Ej: @mailinator.com","title":"Domain"},"description":"Ej: @mailinator.com"},{"name":"x-admin-token","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Admin-Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/mediadores/purge_where":{"post":{"tags":["admin-mediadores"],"summary":"Purge Where","description":"Borrado selectivo por estado y/o antigüedad de created_at.\n- status: 'active' | 'disabled' | 'canceled'\n- subscription_status: 'none' | 'trialing' | 'active' | 'expired'\n- older_than_days: borra los que sean más antiguos que hoy - N días","operationId":"purge_where_admin_mediadores_purge_where_post","parameters":[{"name":"status","in":"query","required":false,"schema":{"type":"string","description":"status=active/disabled/canceled","title":"Status"},"description":"status=active/disabled/canceled"},{"name":"subscription_status","in":"query","required":false,"schema":{"type":"string","description":"none/trialing/active/expired","title":"Subscription Status"},"description":"none/trialing/active/expired"},{"name":"older_than_days","in":"query","required":false,"schema":{"type":"integer","minimum":1,"title":"Older Than Days"}},{"name":"x-admin-token","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Admin-Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/db/health":{"get":{"summary":"Db Health","operationId":"db_health_db_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/admin/migrate/add_cols":{"post":{"tags":["admin-migrate"],"summary":"Add Cols","operationId":"add_cols_admin_migrate_add_cols_post","parameters":[{"name":"x-admin-token","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Admin-Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/migrate/downgrade_trials":{"post":{"tags":["admin-migrate"],"summary":"Downgrade Trials","operationId":"downgrade_trials_admin_migrate_downgrade_trials_post","parameters":[{"name":"x-admin-token","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Admin-Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_upload_file_upload_file_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_file_upload_file_post"},"ChangeIn":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"old_password":{"type":"string","title":"Old Password"},"new_password":{"type":"string","title":"New Password"}},"type":"object","required":["email","old_password","new_password"],"title":"ChangeIn"},"ContactIn":{"properties":{"name":{"type":"string","title":"Name"},"email":{"type":"string","format":"email","title":"Email"},"subject":{"type":"string","title":"Subject"},"message":{"type":"string","title":"Message"},"accept":{"type":"boolean","title":"Accept","default":false}},"type":"object","required":["name","email","subject","message"],"title":"ContactIn"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LoginIn":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"LoginIn"},"MediadorIn":{"properties":{"name":{"type":"string","title":"Name"},"email":{"type":"string","format":"email","title":"Email"},"phone":{"type":"string","title":"Phone"},"provincia":{"type":"string","title":"Provincia"},"especialidad":{"type":"string","title":"Especialidad"},"dni_cif":{"type":"string","title":"Dni Cif"},"tipo":{"type":"string","title":"Tipo"},"accept":{"type":"boolean","title":"Accept"}},"type":"object","required":["name","email","phone","provincia","especialidad","dni_cif","tipo","accept"],"title":"MediadorIn"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}